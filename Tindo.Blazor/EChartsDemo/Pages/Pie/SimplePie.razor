@page "/simple-pie"
<TindoECharts Style="@style" Option="@option"></TindoECharts>

@code {
    private string style = "width: 800px;height:600px;";

    private Option option;

    protected override void OnAfterRender(bool firstRender)
    {
        if(firstRender)
        {
            option = new Option
            {
                Title = new Title
                {
                    Text = "某站点用户访问来源",
                    Subtext = "纯属虚构",
                    Left = TextAlign.Center,
                },
                Tooltip = new Tooltip
                {
                    Trigger = Trigger.Item,
                    Formatter = "{a} <br/>{b} : {c} ({d}%)",
                },
                Legend = new Legend
                {
                    Orient = Orient.Vertical,
                    Left = TextAlign.Left,
                    Data = new string[] { "直接访问", "邮件营销", "联盟广告", "视频广告", "搜索引擎" }
                },
                Series = new Pie[]
                {
                    new Pie
                    {
                        Name= "访问来源",
                        Radius = "55%",
                        Center = new string[] {"50%", "50%"},
                        Emphasis = new Emphasis
                        {
                            ItemStyle = new ItemStyle
                            {
                                ShadowColor = "rgba(0,0,0,0.5)",
                                ShowBlur = 10,
                                ShowOffsetX = 0,
                            }
                        },
                        Data = new JsonObject[]
                        {
                            "{\"value\": 335, \"name\": \"直接访问\"}",
                            "{\"value\": 310, \"name\": \"邮件营销\"}",
                            "{\"value\": 234, \"name\": \"联盟广告\"}",
                            "{\"value\": 135, \"name\": \"视频广告\"}",
                            "{\"value\": 1548, \"name\": \"搜索引擎\"}",

                        }
                    }
                }
            };

            this.StateHasChanged();
        }
    }
}
